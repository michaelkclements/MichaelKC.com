@import "mkcins";
@import "reset";
@import "standard";

@include keyframes(text-fold-in) {
	from {
		@include rotateX(110deg);
	}
}

@include keyframes(section-in) {
	from {
		opacity: 0;
	}
}

@include keyframes(loading-ball-1) {
	0% {
		@include scale(1);
	}
	20% {
		@include scale(0.8);
	}
	70% {
		@include scale(0.9);
	}
}

@include keyframes(loading-ball-2) {
	to {
		@include rotateZ(360deg);
	}
}

@include keyframes(badge-juan) {
	0% {
		@include transform(translateY(100%));
	}
	100% {
		@include transform(translateY(-800%));
	}
}

$color-html: #f55;
$color-css: #0499d7;
$color-audio: #00c58b;
$color-video: #fba600;

body {
	background-color: #252a33;
	height:100vh;

	.navigation {
		position: relative;
		z-index: 1;

		// The hamburger
		.hamburger {
			$padding: 15px;

			background-color: rgba(#000, 0.2);
			cursor: pointer;
			padding: $padding;
			position: fixed;
			top: 0;
			left: 0;
			height: 70px;
			width: 70px;
			z-index: 10000;
			-webkit-tap-highlight-color: transparent;
			@include transition(all 300ms ease);
			@include user-select(none);

			@mixin line() {
				background-color: #fff;
				height: 3px;
				position: absolute;
			}

			.line {
				top:50%;
				left: $padding;
				right: $padding;
				@include translate(0, -50%);
				@include line;

				&:before,
				&:after {
					content: '';
					left: 0;
					width: 100%;
					@include line;
				}

				&:before {
					bottom: calc(100% + 5px);
				}

				&:after {
					top: calc(100% + 5px);
				}
			}
		}

		nav {
			top:100px;
			position: fixed;
			@include transition(all 300ms ease);
			@include translate3d(-200px, 0, 100px);

			ul {
				list-style:none;

				li {
					margin-bottom: 20px;

					a {
						color: #fff;
						display: block;
						font-size: 34px;
						padding: 5px;
					}
				}
			}
		}

	} // .navigation

	.sections {
		overflow: hidden;
		@include perspective(3000px);

		section {
			min-height:100vh;
			position: relative;
			width:100%;
			@include transform-origin(100%, 50%);
			@include transition(all 300ms ease);

			.container {
				margin: 0 auto;
				min-width: 960px;
				max-width: 1400px;
				padding: 50px 0;

				.title {
					font-family: 'Lato';
					font-size: 98px;
					font-weight: 100;
					text-align: center;
					position: relative;
				}

				h2 {
					font-size: 30px;
					font-weight: 300;
				}

				p {
					color: #666;
					margin: 10px 0;
				}

			} // .container

			// Intro section
			&#intro {
				background-color: darken(#385B7F,40%);
				@include transform-style(preserve-3d);

				&:before,
				&:after {
					content: '';
					position: absolute;
					top: 0;
					right: 0;
					bottom: 0;
					left: 0;
				}

				// bg image
				&:before {
					background: url(../images/intro-bg.jpg) center;
					background-size: cover;
				}

				// bg overlay
				&:after {
					background-color: rgba(#385B7F,0.3);
				}

				.text {
					position: absolute;
					bottom: 20%;
					right: 20%;
					text-align: right;
					z-index: 1;
					@include transform-style(preserve-3d);
					@include translate3d(0,-50%, 100px);

					.title,
					.sub-title {
						font-weight: 100;
						@include backface-visibility(hidden);
						@include transform-origin(50%,0);
					}

					.title {
						border: 1px solid rgba(#fff,0.5);
						border-radius: 5px;
						color: #fff;
						display: inline-block;
						font-size: 78px;
						padding: 10px 25px;
						@include animation(text-fold-in 700ms ease 500ms 1 both);
					}

					.sub-title {
						color: #fff;
						font-size: 34px;
						font-weight: 300;
						margin-top: 20px;
						@include animation(text-fold-in 700ms ease 1000ms 1 both);

						.location {
							color: #ff4f79;
						}
					}
				}
			}

			// Work section
			&#work {
				@include gradient-radial(#fff,#ddd);

				.container {
					@include perspective(2000px);
					@include transform-style(preserve-3d);
					@include backface-visibility(hidden);
					$translate-z-value: 500px;

					.tiles {
						margin-top: 50px;
						position: relative;
						@include transform-style(preserve-3d);
						@include transition(all 300ms ease);

						.tile {
							border-radius: 3px;
							box-shadow: 0 0 3px rgba(#000,0.1);
							cursor: pointer;
							float: left;
							margin: 10px;
							width: calc(33.33% - 20px);
							@include transition(all 300ms ease);

							img {
								display: block;
								width: 100%;
							}

							&:hover {
								@include translateZ(50px);
							}
						}

						// When an item is clicked
						&.focus-active {
							@include translateZ(-$translate-z-value);

							.tile {
								opacity: 0.05;
								@include translateZ(-1px);
							}

							.focus {
								opacity: 1;
								pointer-events: all;
							}
						}

						.focus {
							background-color: rgba(#fff,0.6);
							box-shadow: 0 1px 5px rgba(#000,0.1);
							top: 0;
							right: 0;
							left: 0;
							opacity: 0;
							padding: 30px;
							padding-bottom: 140px;
							pointer-events: none;
							position: absolute;
							@include backface-visibility(hidden);
							@include transition(all 300ms ease);
							@include translateZ($translate-z-value);

							// Focused image container
							figure {
								box-shadow: 0 1px 5px rgba(#000,0.1);
								display: inline-block;
								margin-right: 30px;
								vertical-align: top;
								width: 500px;
								@include transition(all 300ms ease);

								a {
									display: block;
									@include transition(all 300ms ease);

									img {
										display: block;
										width: 100%;
									}
								}

								&:hover {
									box-shadow: 0 1px 5px rgba(#26A0D9,0.6);
								}
							}

							article {
								display: inline-block;
								padding-bottom: 70px;
								position: relative;
								vertical-align: top;
								width: 60%;

								h1 {
									font-size: 40px;
									font-weight: 300;
								}

								.badges {
									display: none;
									position: absolute;
									bottom: 0;
									@include clearfix;

									.badge {
										background-color: #fff;
										border:1px solid #bbc1cc;
										border-radius: 50%;
										color: #6e7f95;
										float: left;
										margin-right: 10px;
										font-size: 25px;
										position: relative;
										height: 50px;
										width: 50px;
										@include transition(all 300ms ease);

										i {
											position: absolute;
											left: 50%;
											top: 50%;
											@include translate(-50%,-50%);
										}

										&:hover {

											&.html {
												border-color: $color-html;
												color: $color-html;
											}

											&.css {
												border-color: $color-css;
												color: $color-css;
											}

											&.audio {
												border-color: $color-audio;
												color: $color-audio;
											}

											&.video {
												border-color: $color-video;
												color: $color-video;
											}
										}
									} // .badges .badge
								} // .badges
							} // article


							// Focused item bottom bar
							nav {
								background: #31343F;
								position: absolute;
								right: 0;
								bottom: 0;
								left: 0;
								padding: 22px;

								.button {
									border: 1px solid;
									border-radius: 5px;
									cursor: pointer;
									display: inline-block;
									padding: 5px 10px;
									@include user-select(none);

									&:hover {
										background-color: lighten(#31343F,3%);
									}

									&.back {
										border-color: $color-hyperlink;

										&:hover {
											border-color: lighten($color-hyperlink, 5%);
											color: lighten($color-hyperlink, 5%);
										}
									}

									&.github {
										$git-color: #26a0d9;
										border-color: $git-color;
										color: $git-color;
										float: right;

										&:hover {
											border-color: lighten($git-color,10%);
											color: lighten($git-color,10%);
										}
									}
								}
							} // nav

						} // .focus
					} // .tiles
				}

			} // section#work

			// Experience section
			&#experience {
				background-color: #f5f5f5;
				display: none;

				.container {
					overflow: hidden;
					top: 0;
					bottom: 0;
					left: 50%;
					position: absolute;
					@include translateX(-50%);

					.text {
						font-size: 22px;
						margin-top: 70px;
						width: 57%;
					}

					.badges {
						position: absolute;
						top: 0;
						right: 0;
						bottom: 0;
						z-index: -1;

						.badge {
							border-radius: 50%;
							color: #fff;
							font-size: 80px;
							width: 200px;
							height: 200px;
							position: absolute;
							bottom: 0;
							right: 0;

							i {
								position: absolute;
								left: 50%;
								top: 50%;
								@include translate(-50%,-50%);
							}

							&.html {
								background-color: $color-html;
								right: 300px;
								@include animation(badge-juan 10s ease-in-out 0s infinite both);
							}

							&.css {
								background-color: $color-css;
								right: 200px;
								@include animation(badge-juan 10s ease-in-out 1s infinite both);
							}

							&.audio {
								background-color: $color-audio;
								right: 100px;
								@include animation(badge-juan 10s ease-in-out 0.6s infinite both);
							}

							&.video {
								background-color: $color-video;
								color: $color-video;
								right: 0;
								@include animation(badge-juan 10s ease-in-out 0.5s infinite both);
							}
						}
					}
				}

			} // seciton#experience

			// About me sections
			&#about-me {
				background-color: #f5e9d5;
				overflow: hidden;
				@include gradient-vertical(#f5e9d5,#f5e9d5);

				.container {
					position: absolute;
					bottom: 0;
					top: 0;
					left: 50%;
					text-align: right;
					@include translateX(-50%);

					.title {
						z-index: 1;
					}

					.text {
						display: inline-block;
						font-size: 24px;
						font-weight: 300;
						margin-top: 300px;
						position: relative;
						width: 70%;
						z-index: 2;

						&::before {
							content: '';
							float: left;
							width: 200px;
							height: 600px;
							@include shape-outside(polygon(0% 0%, 100% 100%, 0 100%));
						}
					}
				}

				.my-desk {
					position: absolute;
					width: 1920px;
					height: 100%;
					top: 0;
					@include translateX(-50%);

					.me {
						background-image: url(../images/about.png);
						background-position: bottom;
						background-repeat: no-repeat;
						position: absolute;
						top: 0;
						right: 0;
						bottom: 0;
						left: 0;
						z-index: 1;
					}

					.video {
						bottom: 429px;
						left: 50%;
						position: absolute;
						width: 660px;
						height: 375px;
						@include translate(-50%,0);

						video {
							display: block;
							width: 100%;
						}

						img {
							display: none;
							position: absolute;
							top: 0;
							left: 0;
							width: 100%;
							height: auto;
							z-index: -1;
						}
					}
				} // .my-desk
			} // section#about-me

			&#contact {
				background-color: #272125;
				overflow: hidden;

				.buttons {
					position: absolute;
					left: 20%;
					right: 20%;
					top: 50%;
					z-index: 1;
					@include translateY(-50%);

					.button {
						float: left;
						width: calc(25% - 20px);
						margin: 0 10px;
						height: 200px;
						position: relative;

						i {
							color: #fff;
							font-size: 80px;
							left: 50%;
							top: 50%;
							position: absolute;
							z-index: 1;
							@include translate(-50%,-50%);
						}

						&::before {
							border-radius: 5px;
							content: '';
							opacity: 0.7;
							position: absolute;
							top: 0;
							right: 0;
							bottom: 0;
							left: 0;
							@include transition(all 300ms ease);
						}

						&.twitter {

							&::before {
								background-color: #2ba9e1;
							}
						}

						&.github {

							&::before {
								background-color: #3f4042;
							}
						}

						&.linkedin {

							&::before {
								background-color: #007bb5;
							}
						}

						&.dribbble {

							&::before {
								background-color: #c6376d;
							}
						}

						&:hover {

							&::before {
								opacity: 1;
								@include scale(1.05);
							}
						}
					}
				} // .buttons

				.video {
					position: absolute;
					top: 0;
					right: 0;
					bottom: 0;
					left: 0;

					video {
						height: 100%;
						opacity: 0.03;
						position: absolute;
						left: 50%;
						@include translateX(-50%);
					}
				}
			}

			// Section animate
			&.animate {
				@include animation(section-in 700ms ease 0s 1 backwards);
			}
		} // section
	}

	// Body with navigation active
	&.nav-active {

		.navigation {

			.hamburger {
			}

			nav {
				@include translateX(40px);
			}
		}

		.sections {

			section {
				@include transform(translateX(300px) rotateY(-10deg));
			}
		}
	} // body.nav-active

	// Loading balls
	.loading {
		background-color: #fff;
		border-radius: 50%;
		position: absolute;
		left: 50%;
		top: 50%;
		width: 20px;
		height: 20px;
		margin: -10px 0 0 -10px;
		z-index: -1;
		@include animation(loading-ball-1 1000ms ease-out 0s infinite both);

		&::before,
		&::after {
			background-color: #fff;
			border-radius: 50%;
			content: '';
			margin: -5px 0 0 -5px;
			position: absolute;
			left: 50%;
			top: 50%;
			width:10px;
			height: 10px;
			@include transform-origin(50%, 40px);
		}

		&::before {
			@include animation(loading-ball-2 1000ms ease-out 0s infinite both);
		}

		&:after {
			@include animation(loading-ball-2 1000ms ease-out 100ms infinite both);
		}
	}

	// 1080p
	@media only screen and (max-width: 1920px) {
		.sections {

			section {

				&#intro {

					.text {
						bottom: 15%;

						.title {
							font-size: 78px;
						}

						.sub-title {
							font-size: 28px;
						}
					}
				}

				&#experience {

					.container {

						.title {
							font-size: 70px;
							text-align: left;
						}

						.text {
							font-size: 22px;
							margin-top: 70px;
							width: 57%;
						}
					}
				}

				&#about-me {

					.container {

						.title {
							font-size: 70px;
							text-align: right;
						}

						.text {
							font-size: 22px;
							margin-top: 70px;
							width: 57%;
						}
					}
				}

				&#contact {

					.buttons {

						.button {
							height: 250px;
						}
					}
				}
			}
		}
	}

	@media only screen and (max-width: 1600px) and (max-height: 900px) {
		.sections {

			section {

				&#about-me {

					.container {

						.title {
							font-size: 70px;
							text-align: right;
						}

						.text {
							margin-top: 0;

							&::before {
								width: 420px;
							}
						}
					}
				}
			}
		}
	}

	// Tablet landscape
	@media only screen and (max-width : 1440px) {
		.sections {

			section {

				&#intro {

					.text {
						right:5%;
						bottom:12%;

						.title {
							font-size: 68px;
						}
					}
				}

				&#work {

					.container {
						padding-top: 20px;

						.tiles {
							margin-top: 20px;

							.focus {

								figure {
									width: calc(50% - 40px);
								}

								article {
									width: 50%;
								}
							}
						}
					}
				}

				&#experience {

					.container {

						.text {
							margin-top: 0;
						}
					}
				}

				&#about-me {

					.container {
						padding-top: 30px;

						.text {
							margin-top: 0;

							&::before {
								width: 420px;
							}
						}
					}

					.my-desk {
						@include translateX(-52%);

						.video {

							img {
								display: block;
							}
						}
					}
				}

				&#contact {

					.buttons {

						.button {
							margin: 10px;
							height: 200px;
							width: calc(50% - 20px);

							i {
								font-size: 70px;
							}
						}
					}
				}
			}
		}
	}

	// Tablet portrait
	@media only screen and (max-width : 768px) {
		.sections {

			section {

				$title-size: 60px;

				.container {
					min-width: 768px;

					.title {
						font-size: $title-size;
					}
				}

				&#intro {

					.text {
						right:5%;
						bottom:19%;

						.title {
							font-size: 68px;
						}

						.sub-title {
							font-size: 24px;
						}
					}
				}

				&#work {

					.container {

						p {
							font-size: 18px;
						}

						.tiles {
							margin-top: 10px;

							.focus {
								left: 10px;
								right: 10px;
								padding-left: 30px;
								padding-bottom: 90px;

								article {
									width: auto;

									h1 {
										font-size: 32px;
									}
								}

								figure {
									display: block;
									margin: 0 auto 20px;
									left: 0;
									top: 0;
									position: relative;
									width: 80%;
								}
							}

							.tile {
								width: calc(50% - 20px);
							}
						}
					}
				}

				&#experience {

					.container {

						.title {
							font-size: $title-size;
							text-align: center;
						}

						.text {
							padding: 0 40px;
							text-align: center;
							width: auto;
						}
					}
				}

				&#about-me {
					height: 720px;

					.container {

						.title {
							font-size: $title-size;
							text-align: center;
						}

						.text {
							padding: 0 40px;
							text-align: center;
							width: auto;

							&:before {
								content: none;
							}
						}
					}

					.my-desk {
						height: 670px;
						position: relative;
						width: 768px;
						@include translateX(0);

						.me {
							@include background-size;
						}

						.video {
							bottom: 328px;
							left: 17%;
							right: 17%;
							height: 285px;
							width: auto;
							@include translate(0,0);
						}
					}
				}

			}
		}
	}

	// Small screens
	@media only screen and (max-width : 414px) {

		&.nav-active {

			.loading {
				opacity: 0;
			}

			.sections section {
				//@include transform(translateX(200px) translateZ(-100px));
			}
		}

		.sections {

			section {

				$title-size: 40px;

				.container {
					min-width: 320px;

					.title {
						font-size: $title-size;
					}
				}

				&#intro {

					.text {
						left: 5%;
						right:5%;
						bottom:12%;
						text-align: center;

						.title,
						.sub-title {
							text-align: center;
						}

						.title {
							font-size: 38px;
						}

						.sub-title {
							font-size: 22px;
						}
					}
				}

				&#work {

					.container {

						p {
							font-size: 16px;
						}

						.tiles {

							.focus {

								article {
									padding-bottom: 0;

									.badges {
										display: none;
									}
								}
							}
						}
					}
				}

				&#about-me {

					.container {
						left: 0;
						right:0;
						width: 100%;
						@include translateX(0);

						.title {
							font-size: $title-size;
						}

						.text {
							font-size: 16px;
						}
					}

					.my-desk {
						height: 360px;
						min-width: 320px;
						max-width: 414px;
						left: 50%;
						@include translateX(-50%);

						.video {
							bottom: 174px;
							height: 156px;
							left: 17%;
							right: 17%;
						}
					}
				}

				&#experience {

					.container {
						left: 0;
						right:0;
						width: 100%;
						@include translateX(0);

						.text {
							font-size: 16px;

							p {

								&:first-child {
									display: none;
								}
							}
						}

						.badges {
							opacity: 0.1;
						}
					}
				}

				&#contact {

					.buttons {

						.button {
							margin: 10px;
							height: 110px;

							i {
								font-size: 60px;
							}
						}
					}
				}
			}
		}
	}

	.hide {
		display: none;
	}
}
